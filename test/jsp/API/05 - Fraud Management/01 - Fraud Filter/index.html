<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="author" content="Víctor Cantera">
        <link rel="icon" href="../../../../assets/img/comercia_ico.png" type="image/x-icon"/ >
        <title>Fraud Management (API) - SDK JAVA</title>

        <!-- Bootstrap 4.3.1 -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

        <!-- CSS -->
        <link rel="stylesheet" href="../../../../assets/css/style.css">

        <!-- Script para comprobar los datos de la tarjeta mediante API -->
        <script src="../../../../assets/js/rxp-js.js"></script> <!-- Available at https://github.com/realexpayments -->
    </head>

    <body>
        <!-- NAVBAR -->
        <nav class="navbar navbar-expand-lg navbar-light navbar-rpdc mb-3">
            <a class="navbar-brand">
                <img src="../../../../assets/img/log2.svg" width="30" height="30" class="img-fluid" alt="Logo Addon Payments">
                <span class="addonNav">ADDON</span> <span>PAYMENTS</span>
                <span class="d-none d-sm-none d-lg-inline d-xl-inline sdkNav">
                    <span>
                        /SDK
                        <span class="barraNav">_</span>
                        de
                        <span class="barraNav">_</span>
                        JAVA
                    </span>
                </span>

            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
          </a>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto pl-2 pr-2">
                    <li class="nav-item dropdown">
                        <a class="nav-link pl-2 dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          Inicio
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item pl-2" href="../../../../index.html">Índice</a>
                            <a class="dropdown-item pl-2" href="../../../errores.html">Errores de Addon Payments</a>
                            <a class="dropdown-item pl-2" href="../../../informe.html">Convertir informe</a>
                        </div>
                    </li>
                    <li class="nav-item ml-1 dropdown">
                        <a class="nav-link dropdown-toggle pl-2" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Pagos con tarjeta
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                            <div class="dropdown-header text-center p-0">API</div>
                            <hr class="m-0 p-0">
                                <a class="dropdown-item pl-2" href="../../01%20-%20Pagos%20con%20tarjeta/01%20-%20Autorización/index.html">Autorización</a>
                                <a class="dropdown-item pl-2" href="../../01%20-%20Pagos%20con%20tarjeta/02%20-%20OTB/index.html">OTB</a>
                                <a class="dropdown-item pl-2" href="../../01%20-%20Pagos%20con%20tarjeta/03%20-%20Credit/index.html">Credit</a>
                            <hr class="m-0 p-0">
                            <div class="dropdown-header text-center p-0">HPP</div>
                            <hr class="m-0 p-0">
                                <a class="dropdown-item pl-2" href="../../../HPP/01%20-%20Pagos%20con%20tarjeta/01%20-%20Autorizacion/index.html">Autorización</a>
                                <a class="dropdown-item pl-2" href="../../../HPP/01%20-%20Pagos%20con%20tarjeta/02%20-%20OTB/index.html">OTB</a>
                                <a class="dropdown-item pl-2" href="../../../HPP/01%20-%20Pagos%20con%20tarjeta/03%20-%20Pay%20By%20Link/index.html">Pay By Link</a>
                        </div>
                    </li>
                    
                    <li class="nav-item ml-1 dropdown">
                        <a class="nav-link dropdown-toggle pl-2" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Almacenamiento de tarjeta
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                            <div class="dropdown-header text-center p-0">API</div>
                            <hr class="m-0 p-0">
                                <a class="dropdown-item pl-2" href="../../02%20-%20Almacenamiento%20de%20tarjeta/01%20-%20Crear%20un%20cliente/index.html">Crear un cliente</a>
                                <a class="dropdown-item pl-2" href="../../02%20-%20Almacenamiento%20de%20tarjeta/02%20-%20Almacenar%20una%20tarjeta/index.html">Almacenar una tarjeta</a>
                                <a class="dropdown-item pl-2" href="../../02%20-%20Almacenamiento%20de%20tarjeta/03%20-%20Editar%20tarjeta/index.html">Editar tarjetas</a>
                                <a class="dropdown-item pl-2" href="../../02%20-%20Almacenamiento%20de%20tarjeta/04%20-%20Eliminar%20tarjeta/index.html">Eliminar tarjetas</a>
                                <a class="dropdown-item pl-2" href="../../02%20-%20Almacenamiento%20de%20tarjeta/05%20-%20Auth/index.html">Autorización</a>
                                <a class="dropdown-item pl-2" href="../../02%20-%20Almacenamiento%20de%20tarjeta/06%20-%20Credit/index.html">Credit</a>
                            <hr class="m-0 p-0">
                            <div class="dropdown-header text-center p-0">HPP</div>
                            <hr class="m-0 p-0">
                                <a class="dropdown-item pl-2" href="../../../HPP/02%20-%20Almacenamiento%20de%20tarjeta/01%20-%20Crear%20un%20cliente/index.html">Crear un cliente</a>
                                <a class="dropdown-item pl-2" href="../../../HPP/02%20-%20Almacenamiento%20de%20tarjeta/02%20-%20Mostrar%20Tarjetas/index.html">Mostrar tarjetas</a>
                        </div>
                    </li>
                    
                    <li class="nav-item ml-1 dropdown">
                        <a class="nav-link pl-2 dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Gestión de transacciones
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item pl-2" href="../../03%20-%20Gestión%20de%20transacciones/01%20-%20Capturar/index.html">Settle (Capturar)</a>
                            <a class="dropdown-item pl-2" href="../../03%20-%20Gestión%20de%20transacciones/02%20-%20Rebate/index.html">Rebate (Devolución)</a>
                            <a class="dropdown-item pl-2" href="../../03%20-%20Gestión%20de%20transacciones/03%20-%20Void/index.html">Void (Anular transacción)</a>
                        </div>
                    </li>

                    <li class="nav-item ml-1 dropdown">
                        <a class="nav-link pl-2 dropdown-toggle active" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Filtro de fraude
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                            
                            <div class="dropdown-header text-center p-0">API</div>
                            <hr class="m-0 p-0">
                                <a class="dropdown-item pl-2 active"  href="#">Filtro de fraude</a>
                                <a class="dropdown-item pl-2"  href="../02%20-%20Address%20Verification">Verificación de dirección</a>
                                <a class="dropdown-item pl-2"  href="../03%20-%20Hold">Retener transacción</a>
                                <a class="dropdown-item pl-2"  href="../04%20-%20Lanzamiento">Lanzar transacción</a>
                            <hr class="m-0 p-0">
                            <div class="dropdown-header text-center p-0">HPP</div>
                            <hr class="m-0 p-0">
                                <a class="dropdown-item pl-2"  href="../../../HPP/03%20-%20Fraud%20Management/01%20-%20Fraud%20Filter/index.html">Filtro de fraude</a>
                        </div>
                    </li>

                    <li class="nav-item ml-1 dropdown">
                        <a class="nav-link pl-2 dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            DCC
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                            <div class="dropdown-header text-center p-0">API</div>
                            <hr class="m-0 p-0">
                                <a class="dropdown-item pl-2"  href="../../04%20-%20DCC/01%20-%20Comprobar%20DCC/index.html">Comprobar DCC</a>
                            <hr class="m-0 p-0">
                            <div class="dropdown-header text-center p-0">HPP</div>
                            <hr class="m-0 p-0">
                                <a class="dropdown-item pl-2"href="../../../HPP/04%20-%20DCC/index.html">Operación con DCC</a>
                        </div>
                    </li>
                </ul>
            </div>
        </nav>
        <!-- /NAVBAR -->

        <div class="col-lg-12"> 
            <div id="contenidoComun" class="container-fluid">
                <div class="row">

                    <!-- Menú lateral -->
                    <div class="col-lg-2 sticky-top d-none d-sm-none d-lg-block d-xl-block MenuLateral">

                        <!-- Barra de progreso -->
                        <div class="progress-bar" id="progreso"></div>
                        <!-- /Barra de progreso -->

                        <nav class="navbar sticky-top navbar-light" style="padding: 0px;">
                            <nav class="nav nav-pills flex-column">
                                <a class="nav-link" href="#fraud">1. Filtro de fraude</a>
                                <nav class="nav nav-pills flex-column">
                                    <a class="nav-link ml-3 my-1" href="#codigoEjemplo">1.1 Código de ejemplo</a>
                                </nav>
                                <a class="nav-link" href="#descripciones">2. Descripciones</a>
                                <nav class="nav nav-pills flex-column">
                                    <a class="nav-link ml-3 my-1" id="#ConfigTerminal" href="#ConfigTerminal">2.1 Configuración del terminal</a>
                                    <a class="nav-link ml-3 my-1" id="#customerData" href="#customerData">2.2 Datos del cliente</a>
                                    <a class="nav-link ml-3 my-1" id="#envioOP" href="#envioOP">2.3 Envío de la operación</a>
                                </nav>
                            </nav>
                        </nav>
                    </div>

                    <div class="col-lg-10" >

                        <!-- Punto 1 -->
                        <div class="contenedor">
                            <div class="pl-3 pt-3 pr-3 pb-4 mb-3 text-justify">
                                <h3 id="fraud" class="titulo">
                                    1. Filtro de fraude
                                </h3>
                                <hr>

                                <p>
                                   El filtro de Fraude le permite establecer reglas en el comercio electrónico mantener, bloquear o pasar transacciones. También puede proporcionar información adicional en la solicitud con la que puede establecer reglas. Esto incluye la dirección IP del cliente, los detalles de facturación y envío y los códigos específicos del producto.
                                </p>

                                <p class="alert alert-primary">
                                    Solo es posible establecer el modo Filtro de fraude en PASIVO o APAGADO para transacciones individuales en la solicitud. Si desea configurarlo como ACTIVO, debe configurarlo en el portal de comercio electrónico y se aplicará a todas las transacciones.
                                </p>

                                <h5 style="" class="pt-3" id="codigoEjemplo">
                                    1.1 Código de ejemplo
                                </h5>
                                
                                <hr>

                                <div class="p-4 panelCode">
                                    <code>                                    
                                            <span class="comments">// Importamos las clases necesarias para realizar las peticiones</span>
                                        <br>
                                            <span class="purple">import </span><span class="variables">java.math.BigDecimal</span><span class="new">;</span>
                                        <br>
                                        <br>
                                            <span class="purple">import </span><span class="variables">org.junit.Test</span><span class="new">;</span>
                                        <br>
                                        <br>
                                            <span class="purple">import </span><span class="variables">com.global.api.ServicesContainer</span><span class="new">;</span>
                                        <br>
                                            <span class="purple">import </span><span class="variables">com.global.api.entities.Transaction</span><span class="new">;</span>
                                        <br>
                                            <span class="purple">import </span><span class="variables">com.global.api.entities.Address</span><span class="new">;</span>
                                        <br>
                                            <span class="purple">import </span><span class="variables">com.global.api.entities.enums.AddressType</span><span class="new">;</span>
                                        <br>
                                            <span class="purple">import </span><span class="variables">com.global.api.paymentMethods.CreditCardData</span><span class="new">;</span>
                                        <br>
                                            <span class="purple">import </span><span class="variables">com.global.api.entities.exceptions.ApiException</span><span class="new">;</span>
                                        <br>
                                            <span class="purple">import </span><span class="variables">com.global.api.serviceConfigs.GatewayConfig</span><span class="new">;</span>
                                        <br>
                                        <br>
                                            <span class="comments">// Configuramos el cliente y los ajustes de la petición</span>
                                        <br>
                                            <span class="purple">public class </span><span class="variables">Addon {</span>
                                        <br>
                                        <br>
                                            <span class="pl-3 purple">private </span><span class="variables">CreditCardData </span><span class="new">card;</span>
                                        <br>
                                        <br>
                                            <span class="pl-3 purple">private </span><span class="variables">Address </span><span class="new">billingAddress;</span>
                                        <br>
                                        <br>
                                            <span class="pl-3 purple">private </span><span class="variables">Address </span><span class="new">shippingAddress;</span>
                                        <br>
                                        <br>
                                            <span class="pl-3 purple">public </span><span class="variables">Addon() </span><span class="purple">throws </span><span class="variables">ApiException {</span>
                                        <br>
                                            <span class="pl-5 variables">GatewayConfig </span><span class="orange">config </span><span class="new">= new </span><span class="variables">GatewayConfig();</span>
                                        <br>
                                            <span class="pl-5 orange">config.</span><span class="variables">setMerchantId(</span><span class="new">"addonjavatest"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 orange">config.</span><span class="variables">setAccountId(</span><span class="new">"api"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 orange">config.</span><span class="variables">setSharedSecret(</span><span class="new">"secret"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 orange">config.</span><span class="variables">setServiceUrl(</span><span class="new">"https://remote.addonpayments.com/remote"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 variables">ServicesContainer.configureService(</span><span class="orange">config</span><span class="variables">);</span>
                                        <br>
                                        <br>
                                            <span class="pl-5 comments">// Creamos el objeto de la tarjeta</span>
                                        <br>
                                            <span class="pl-5 new">card </span><span class="variables">= </span><span class="purple">new </span><span class="variables">CreditCardData();</span>
                                        <br>
                                            <span class="pl-5 new">card.</span><span class="variables">setNumber(</span><span class="new">"4263970000005262"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 new">card.</span><span class="variables">setExpMonth(</span>12<span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 new">card.</span><span class="variables">setExpYear(</span>2025<span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 new">card.</span><span class="variables">setCvn(</span><span class="new">"131"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 new">card.</span><span class="variables">setCardHolderName(</span><span class="new">"Víctor Cantera"</span><span class="variables">);</span>
                                        <br>
                                        <br>
                                            <span class="pl-5 comments">// Creamos el objeto de la dirección de facturación</span>
                                        <br>
                                            <span class="pl-5 new">billingAddress </span><span class="variables">= </span><span class="purple">new </span><span class="variables">Address();</span>
                                        <br>
                                            <span class="pl-5 new">billingAddress.</span><span class="variables">setStreetAddress1(</span><span class="new">"Calle 123"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 new">billingAddress.</span><span class="variables">setPostalCode(</span><span class="new">"03201"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 new">billingAddress.</span><span class="variables">setCountry(</span><span class="new">"ES"</span><span class="variables">);</span>
                                        <br>
                                        <br>
                                            <span class="pl-5 comments">// Creamos el objeto de la dirección de envío</span>
                                        <br>
                                            <span class="pl-5 new">shippingAddress </span><span class="variables">= </span><span class="purple">new </span><span class="variables">Address();</span>
                                        <br>
                                            <span class="pl-5 new">shippingAddress.</span><span class="variables">setStreetAddress1(</span><span class="new">"Calle 123"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 new">shippingAddress.</span><span class="variables">setPostalCode(</span><span class="new">"03201"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 new">shippingAddress.</span><span class="variables">setCountry(</span><span class="new">"ES"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-3 variables">}</span>
                                        <br>
                                        <br>
                                            <span class="pl-3 comments">// Lanzamos la petición al servidor de Addon Payments</span>
                                        <br>
                                            <span class="pl-3 comments">@Test</span>
                                        <br>
                                            <span class="pl-3 purple">public void </span><span class="variables">Fraud() </span><span class="purple">throws </span><span class="variables">ApiException {</span>
                                        <br>
                                        <br>
                                            <span class="pl-5 purple">try </span><span class="variables">{</span>
                                        <br>
                                            <span class="pl-6 comments">// Procesamos una autorización con el filtro de fraude</span>
                                        <br>
                                            <span class="pl-6 variables">Transaction </span><span class="orange">response </span><span class="new">= </span><span class="new">card</span><span class="variables">.charge(</span><span class="purple">new </span><span class="variables">BigDecimal(</span><span class="new">"19.19"</span><span class="variables">))</span>
                                        <br>
                                            <span class="pl-7 variables">.withCurrency(</span><span class="new">"EUR"</span><span class="variables">)</span>
                                        <br>
                                            <span class="pl-7 variables">.withAddress(</span><span class="new">billingAddress</span><span class="variables">, AddressType.Billing</span><span class="variables">)</span>
                                        <br>
                                            <span class="pl-7 variables">.withAddress(</span><span class="new">shippingAddress</span><span class="variables">, AddressType.Shipping</span><span class="variables">)</span>
                                        <br>
                                            <span class="pl-7 variables">.withProductId(</span><span class="new">"SID9838383"</span><span class="variables">)</span>
                                        <br>
                                            <span class="pl-7 variables">.withClientTransactionId(</span><span class="new">"Car Part HV"</span><span class="variables">)</span>
                                        <br>
                                            <span class="pl-7 variables">.withCustomerId(</span><span class="new">"E8953893489"</span><span class="variables">)</span>
                                        <br>
                                            <span class="pl-7 variables">.withCustomerIpAddress(</span><span class="new">"123.123.123.123"</span><span class="variables">)</span>
                                        <br>
                                            <span class="pl-7 variables">.execute();</span>
                                        <br>
                                        <br>
                                            <span class="comments pl-6">// Obtenemos la respuesta y la mostramos</span>
                                        <br>
                                            <span class="pl-6 variables">String </span><span class="orange">result </span><span class="variables">= </span><span class="new">"Resultado == " </span><span class="variables">+ </span><span class="orange">response</span><span class="variables">.getResponseCode(); </span><span class="comments">// 00 == Success</span>
                                        <br>
                                            <span class="pl-6 variables">String </span><span class="orange">message </span><span class="variables">= </span><span class="new">"Mensaje == " </span><span class="variables">+ </span><span class="orange">response</span><span class="variables">.getResponseMessage(); </span><span class="comments">// [ test system ] AUTHORISED</span>
                                        <br>
                                            <span class="pl-6 variables">String </span><span class="orange">orderId </span><span class="variables">= </span><span class="new">"Order ID == " </span><span class="variables">+ </span><span class="orange">response</span><span class="variables">.getOrderId(); </span><span class="comments">// ezJDQjhENTZBLTdCNzNDQw</span>
                                        <br>
                                            <span class="pl-6 variables">String </span><span class="orange">authCode </span><span class="variables">= </span><span class="new">"Código de autorización == " </span><span class="variables">+ </span><span class="orange">response</span><span class="variables">.getAuthorizationCode(); </span><span class="comments">// Código de autorización</span>
                                        <br>
                                            <span class="pl-6 variables">String </span><span class="orange">paymentsReference </span><span class="variables">= </span><span class="new">"Transaction ID (PasRef) == " </span><span class="variables">+ </span><span class="orange">response</span><span class="variables">.getTransactionId(); </span><span class="comments">// Identificador de transacción (PASREF)</span>
                                        <br>
                                            <span class="pl-6 variables">String </span><span class="orange">schemeReferenceData </span><span class="variables">= </span><span class="new">"Schema Reference == " </span><span class="variables">+ </span><span class="orange">response</span><span class="variables">.getSchemeId(); </span><span class="comments">// MMC0F00YE4000000715</span>
                                        <br>
                                        <br>
                                            <span class="pl-5 variables">}</span><span class="purple"> catch</span> <span class="variables">(ApiException exc) {</span>
                                        <br>
                                            <span class="comments pl-7">// Añada aquí su tratamiento de errores</span>
                                        <br>
                                            <span class="pl-7 variables">String <span class="orange">errorMessage </span><span class="variables">= </span><span class="orange">exc</span><span class="variables">.getMessage();</span>
                                        <br>
                                            <span class="pl-5 variables">}</span>
                                        <br>
                                            <span class="pl-4 variables">}</span>
                                        <br>
                                            <span class="variables">}</span>
                                    </code>
                                </div>
                                <!-- Fin código ejemplo-->
                            </div>
                        </div>
                        <!-- Fin punto 1 -->

                        <!-- Punto 2 -->
                        <div class="contenedor">
                            <div class="pl-3 pt-3 pr-3 pb-1 mb-3 text-justify">
                                <h3 class="pt-1" id="descripciones">
                                    2. Descripciones
                                </h3>

                                <hr>

                                <h5 id="ConfigTerminal" class="mt-3">
                                    2.1 Configuración del terminal
                                </h5>

                                <p>
                                   Debemos introducir los datos de configuración que se facilitan en la llamada de cualificación del soporte técnico de Addon Payments.
                                </p>

                                <ul>
                                   <li>
                                       Merchant_ID = Identificador del comercio.
                                   </li>

                                   <br>

                                   <li>
                                       SubAccount = Subcuenta faciltiada en la llamada de cualificación (en caso de que se envíe la operación sin subcuenta, se usará la establecida por defecto en la creación de su terminal).
                                   </li>

                                   <br>

                                   <li>
                                       Shared Secret = Contraseña de seguridad del terminal.
                                   </li>

                                </ul>
                                <small class="form-text text-muted alert alert-primary">
                                    --&gt; En caso de que le falte algún dato de los mencionados arriba, debe contactar con su soporte técnico de Addon Payments llamando al teléfono 914 353 028 (opción 2) o enviando un email al correo electrónico <a target="_blank" href="mailto:soporteaddonpayments.com">soporteaddonpayments.com</a>.
                                </small>
                                <div class="p-4 mb-4 panelCode">
                                    <code>
                                            <span class="variables">GatewayConfig </span><span class="orange">config </span><span class="new">= new </span><span class="variables">GatewayConfig();</span>
                                        <br>
                                            <span class="orange">config.</span><span class="variables">setMerchantId(</span><span class="new">"addonjavatest"</span><span class="variables">);</span>
                                        <br>
                                            <span class="orange">config.</span><span class="variables">setAccountId(</span><span class="new">"api"</span><span class="variables">);</span>
                                        <br>
                                            <span class="orange">config.</span><span class="variables">setSharedSecret(</span><span class="new">"secret"</span><span class="variables">);</span>
                                        <br>
                                            <span class="orange">config.</span><span class="variables">setServiceUrl(</span><span class="new">"https://remote.addonpayments.com/remote"</span><span class="variables">); </span><span class="comments">// Se debe emplear una de las siguientes URL's:</span>
                                        <br>
                                            <span class="comments">// Sandbox URL para el entorno de pruebas - <b>https://remote.sandbox.addonpayments.com/remote</b>.</span>
                                        <br>
                                            <span class="comments">// Live URL para el entorno de producción - <b>https://remote.addonpayments.com/remote</b>.</span>
                                        <br>
                                            <span class="variables">ServicesContainer.configureService(</span><span class="orange">config</span><span class="variables">);</span>
                                    </code>
                                </div>

                                <hr>

                                <h5 id="customerData" class="mt-3">
                                    2.2 Datos del cliente
                                </h5>

                                    <p>
                                       La información que debemos pasar al servidor es la siguiente:
                                    </p>

                                    <ul>

                                        <li>
                                            Creamos un nuevo objeto tarjeta llamado "new CreditCardData()":
                                        </li>
                                        <ul>
                                            <li>
                                                <span class="arrow">new CreditCardData()</span><span class="require">;</span>
                                            </li>
                                        </ul>

                                        <br>

                                        <li>
                                            Indicamos cuál es el número de la tarjeta a la cual vamos a realizarle el cargo:
                                            <span class="comentariosBgW">"4263970000005262"</span><span class="arrow">;</span>
                                        </li>
                                        <ul>
                                            <li>
                                                <span class="arrow">card</span><span class="variableBgW">.setNumber</span><span class="require"> = </span><span class="variableBgW">(</span><span class="comentariosBgW">"4263970000005262"</span><span class="variableBgW">)</span><span class="arrow">;</span>
                                            </li>
                                        </ul>

                                        <br>

                                        <li>
                                            Indicamos el mes de expiración:
                                        </li>
                                        <ul>
                                            <li>
                                                <span class="arrow">card</span><span class="variableBgW">.setExpMonth</span><span class="require"> = </span><span class="variableBgW">(</span><span class="comentariosBgW">12</span><span class="variableBgW">)</span><span class="arrow">;</span>
                                            </li>
                                        </ul>

                                        <br>

                                        <li>
                                            Indicamos la fecha de expiración:
                                        </li>
                                        <ul>
                                            <li>
                                                <span class="arrow">card</span><span class="variableBgW">.setExpYear</span><span class="require"> = </span><span class="variableBgW">(</span><span class="comentariosBgW">2025</span><span class="variableBgW">)</span><span class="arrow">;</span>
                                            </li>
                                        </ul>

                                        <br>

                                        <li>
                                            Indicamos el código de seguridad de la tarjeta:
                                        </li>
                                        <ul>
                                            <li>
                                                <span class="arrow">card</span><span class="variableBgW">.setCvn</span><span class="require"> = </span><span class="variableBgW">(</span><span class="comentariosBgW">"123"</span><span class="variableBgW">)</span><span class="arrow">;</span>
                                            </li>
                                        </ul>

                                        <br>

                                        <li>
                                            Nombre del titular de la tarjeta:
                                        </li>
                                        <ul>
                                            <li>
                                                <span class="arrow">card</span><span class="variableBgW">.setCardHolderName</span><span class="require"> = </span><span class="variableBgW">(</span><span class="comentariosBgW">"Nombre del cliente"</span><span class="arrow"><span class="variableBgW">)</span>;</span>
                                            </li>
                                        </ul>

                                        <br>

                                        <li>
                                            Creamos un nuevo objeto para la dirección de facturación llamado "billingAddress": 
                                        </li>
                                        <ul>
                                            <li>
                                                <span class="arrow">billingAddress</span><span class="arrow"> = </span> <span class="orangeBgW">new </span><span class="arrow">Address();</span>
                                            </li>
                                        </ul>

                                        <br>

                                        <li>
                                            Indicamos la dirección de facturación, el código postal del cliente y el país de facturación: 
                                        </li>

                                        <ul>
                                            <li>
                                                <span class="arrow">billingAddress</span><span class="variableBgW">.setStreetAddress1</span><span class="require"> = </span><span class="variableBgW">(</span><span class="comentariosBgW">"Calle 123"</span><span class="variableBgW">)</span><span class="arrow">;</span>
                                            </li>

                                            <li>
                                                <span class="arrow">billingAddress</span><span class="variableBgW">.setPostalCode</span><span class="require"> = </span><span class="variableBgW">(</span><span class="comentariosBgW">"03201"</span><span class="variableBgW">)</span><span class="arrow">;</span>
                                            </li>

                                            <li>
                                                <span class="arrow">billingAddress</span><span class="variableBgW">.setCountry</span><span class="require"> = </span><span class="variableBgW">(</span><span class="comentariosBgW">"ES"</span><span class="variableBgW">)</span><span class="arrow">;</span>
                                            </li>
                                        </ul>

                                        <br>

                                        <li>
                                            Creamos un nuevo objeto para la dirección de envío llamado "shippingAddress": 
                                        </li>

                                        <ul>
                                            <li>
                                                <span class="arrow">shippingAddress</span><span class="variableBgW">.setStreetAddress1</span><span class="require"> = </span><span class="variableBgW">(</span><span class="comentariosBgW">"Calle 123"</span><span class="variableBgW">)</span><span class="arrow">;</span>
                                            </li>

                                            <li>
                                                <span class="arrow">shippingAddress</span><span class="variableBgW">.setPostalCode</span><span class="require"> = </span><span class="variableBgW">(</span><span class="comentariosBgW">"03201"</span><span class="variableBgW">)</span><span class="arrow">;</span>
                                            </li>

                                            <li>
                                                <span class="arrow">shippingAddress</span><span class="variableBgW">.setCountry</span><span class="require"> = </span><span class="variableBgW">(</span><span class="comentariosBgW">"ES"</span><span class="variableBgW">)</span><span class="arrow">;</span>
                                            </li>
                                        </ul>

                                    </ul>

                                    <div class="p-4 mb-4 panelCode">
                                        <code>
                                                <span class="comments">// Creamos el objeto de la tarjeta</span>
                                            <br>
                                                <span class="new">card </span><span class="variables">= </span><span class="purple">new </span><span class="variables">CreditCardData();</span>
                                            <br>
                                                <span class="new">card.</span><span class="variables">setNumber(</span><span class="new">"4263970000005262"</span><span class="variables">);</span>
                                            <br>
                                                <span class="new">card.</span><span class="variables">setExpMonth(</span>12<span class="variables">);</span>
                                            <br>
                                                <span class="new">card.</span><span class="variables">setExpYear(</span>2025<span class="variables">);</span>
                                            <br>
                                                <span class="new">card.</span><span class="variables">setCvn(</span><span class="new">"131"</span><span class="variables">);</span>
                                            <br>
                                                <span class="new">card.</span><span class="variables">setCardHolderName(</span><span class="new">"Víctor Cantera"</span><span class="variables">);</span>
                                            <br>
                                            <br>
                                                <span class="comments">// Creamos el objeto de la dirección de facturación</span>
                                            <br>
                                                <span class="new">billingAddress </span><span class="variables">= </span><span class="purple">new </span><span class="variables">Address();</span>
                                            <br>
                                                <span class="new">billingAddress.</span><span class="variables">setStreetAddress1(</span><span class="new">"Calle 123"</span><span class="variables">);</span>
                                            <br>
                                                <span class="new">billingAddress.</span><span class="variables">setPostalCode(</span><span class="new">"03201"</span><span class="variables">);</span>
                                            <br>
                                                <span class="new">billingAddress.</span><span class="variables">setCountry(</span><span class="new">"ES"</span><span class="variables">);</span>
                                            <br>
                                            <br>
                                                <span class="comments">// Creamos el objeto de la dirección de envío</span>
                                            <br>
                                                <span class="new">shippingAddress </span><span class="variables">= </span><span class="purple">new </span><span class="variables">Address();</span>
                                            <br>
                                                <span class="new">shippingAddress.</span><span class="variables">setStreetAddress1(</span><span class="new">"Calle 123"</span><span class="variables">);</span>
                                            <br>
                                                <span class="new">shippingAddress.</span><span class="variables">setPostalCode(</span><span class="new">"03201"</span><span class="variables">);</span>
                                            <br>
                                                <span class="new">shippingAddress.</span><span class="variables">setCountry(</span><span class="new">"ES"</span><span class="variables">);</span>
                                        </code>
                                    </div>

                                <hr>

                                <h5 id="envioOP" class="mt-3">
                                    2.3 Envío de la operación
                                </h5>

                                <p>
                                    Para enviar la operación debemos emplear el modelo de excepciones "try - catch". 
                                </p>

                                <ul>
                                    <li>
                                        Cargamos el importe en la tarjeta: 
                                    </li>
                                    <ul>
                                        <li>
                                            <span class="arrow">Transaction </span><span>response = card</span><span class="arrow">.charge</span><span class="variableBgW">(</span><span>new </span><span class="arrow">BigDecimal</span><span class="variableBgW">(</span><span class="comentariosBgW">"19.19"</span><span class="variableBgW">))</span>
                                        </li>
                                    </ul>

                                    <br>

                                    <li>
                                        Indicamos la moneda con la que vamos a realizar la operación: 
                                    </li>
                                    <ul>
                                        <li>
                                            <span class="arrow">.withCurrency</span><span class="variableBgW">(</span><span class="comentariosBgW">"EUR"</span><span class="variableBgW">)</span>
                                        </li>
                                    </ul>

                                    <br>

                                    <li>
                                        Añadimos la dirección de facturación: 
                                    </li>
                                    <ul>
                                        <li>
                                            <span class="arrow">.withAddress</span><span class="variableBgW">(</span><span class="variableBgW">billingAddress</span><span class="arrow">, AddressType.Billing</span><span class="variableBgW">)</span>
                                        </li>
                                    </ul>

                                    <br>

                                    <li>
                                        Añadimos la dirección de envío: 
                                    </li>
                                    <ul>
                                        <li>
                                            <span class="arrow">.withAddress</span><span class="variableBgW">(</span><span class="variableBgW">shippingAddress</span><span class="arrow">, AddressType.Shipping</span><span class="variableBgW">)</span>
                                        </li>
                                    </ul>

                                    <br>

                                    <li>
                                        Añadimos el identificador del producto: 
                                    </li>
                                    <ul>
                                        <li>
                                            <span class="arrow">.withProductId</span><span class="variableBgW">(</span><span class="comentariosBgW">"SKU"</span><span class="variableBgW">)</span>
                                        </li>
                                    </ul>

                                    <br>

                                    <li>
                                        Añadimos la dirección de envío: 
                                    </li>
                                    <ul>
                                        <li>
                                            <span class="arrow">.withClientTransactionId</span><span class="variableBgW">(</span><span class="comentariosBgW">"Car Part HV"</span><span class="variableBgW">)</span>
                                        </li>
                                    </ul>

                                    <br>

                                    <li>
                                        Añadimos el identificador del cliente: 
                                    </li>
                                    <ul>
                                        <li>
                                            <span class="arrow">.withCustomerId</span><span class="variableBgW">(</span><span class="comentariosBgW">"E8953893489"</span><span class="variableBgW">)</span>
                                        </li>
                                    </ul>

                                    <br>

                                    <li>
                                        Añadimos la dirección IP del cliente: 
                                    </li>
                                    <ul>
                                        <li>
                                            <span class="arrow">.withCustomerIpAddress</span><span class="variableBgW">(</span><span class="comentariosBgW">"123.123.123.123"</span><span class="variableBgW">)</span>
                                        </li>
                                    </ul>

                                    <br>

                                    <li>
                                        Ejecutamos la operación contra los servidores de Addon Payments: 
                                    </li>
                                    <ul>
                                        <li>
                                            <span class="arrow">.execute();</span>
                                        </li>
                                    </ul>

                                </ul>
                                <div class="p-4 mb-4 panelCode">
                                    <code>
                                            <span class="comments">// Lanzamos la petición al servidor de Addon Payments</span>
                                        <br>
                                            <span class="comments">@Test</span>
                                        <br>
                                            <span class="purple">public void </span><span class="variables">Fraud() </span><span class="purple">throws </span><span class="variables">ApiException {</span>
                                        <br>
                                        <br>
                                            <span class="pl-3 purple">try </span><span class="variables">{</span>
                                        <br>
                                            <span class="pl-5 comments">// Procesamos una autorización con el filtro de fraude</span>
                                        <br>
                                            <span class="pl-5 variables">Transaction </span><span class="orange">response </span><span class="new">= </span><span class="new">card</span><span class="variables">.charge(</span><span class="purple">new </span><span class="variables">BigDecimal(</span><span class="new">"19.19"</span><span class="variables">))</span>
                                        <br>
                                            <span class="pl-7 variables">.withCurrency(</span><span class="new">"EUR"</span><span class="variables">)</span>
                                        <br>
                                            <span class="pl-7 variables">.withAddress(</span><span class="new">billingAddress</span><span class="variables">, AddressType.Billing</span><span class="variables">)</span>
                                        <br>
                                            <span class="pl-7 variables">.withAddress(</span><span class="new">shippingAddress</span><span class="variables">, AddressType.Shipping</span><span class="variables">)</span>
                                        <br>
                                            <span class="pl-7 variables">.withProductId(</span><span class="new">"SID9838383"</span><span class="variables">)</span>
                                        <br>
                                            <span class="pl-7 variables">.withClientTransactionId(</span><span class="new">"Car Part HV"</span><span class="variables">)</span>
                                        <br>
                                            <span class="pl-7 variables">.withCustomerId(</span><span class="new">"E8953893489"</span><span class="variables">)</span>
                                        <br>
                                            <span class="pl-7 variables">.withCustomerIpAddress(</span><span class="new">"123.123.123.123"</span><span class="variables">)</span>
                                        <br>
                                            <span class="pl-7 variables">.execute();</span>
                                        <br>
                                        <br>
                                            <span class="comments pl-5">// Obtenemos la respuesta y la mostramos</span>
                                        <br>
                                            <span class="pl-5 variables">String </span><span class="orange">result </span><span class="variables">= </span><span class="new">"Resultado == " </span><span class="variables">+ </span><span class="orange">response</span><span class="variables">.getResponseCode(); </span><span class="comments">// 00 == Success</span>
                                        <br>
                                            <span class="pl-5 variables">String </span><span class="orange">message </span><span class="variables">= </span><span class="new">"Mensaje == " </span><span class="variables">+ </span><span class="orange">response</span><span class="variables">.getResponseMessage(); </span><span class="comments">// [ test system ] AUTHORISED</span>
                                        <br>
                                            <span class="pl-5 variables">String </span><span class="orange">orderId </span><span class="variables">= </span><span class="new">"Order ID == " </span><span class="variables">+ </span><span class="orange">response</span><span class="variables">.getOrderId(); </span><span class="comments">// ezJDQjhENTZBLTdCNzNDQw</span>
                                        <br>
                                            <span class="pl-5 variables">String </span><span class="orange">authCode </span><span class="variables">= </span><span class="new">"Código de autorización == " </span><span class="variables">+ </span><span class="orange">response</span><span class="variables">.getAuthorizationCode(); </span><span class="comments">// Código de autorización</span>
                                        <br>
                                            <span class="pl-5 variables">String </span><span class="orange">paymentsReference </span><span class="variables">= </span><span class="new">"Transaction ID (PasRef) == " </span><span class="variables">+ </span><span class="orange">response</span><span class="variables">.getTransactionId(); </span><span class="comments">// Identificador de transacción (PASREF)</span>
                                        <br>
                                            <span class="pl-5 variables">String </span><span class="orange">schemeReferenceData </span><span class="variables">= </span><span class="new">"Schema Reference == " </span><span class="variables">+ </span><span class="orange">response</span><span class="variables">.getSchemeId(); </span><span class="comments">// MMC0F00YE4000000715</span>
                                        <br>
                                        <br>
                                            <span class="pl-3 variables">}</span><span class="purple"> catch</span> <span class="variables">(ApiException exc) {</span>
                                        <br>
                                            <span class="comments pl-5">// Añada aquí su tratamiento de errores</span>
                                        <br>
                                            <span class="pl-5 variables">String <span class="orange">errorMessage </span><span class="variables">= </span><span class="orange">exc</span><span class="variables">.getMessage();</span>
                                        <br>
                                            <span class="pl-3 variables">}</span>
                                        <br>
                                            <span class="variables">}</span>
                                    </code>
                                </div>

                                <p class="pb-4">
                                    Para la respuesta obtenemos en la variable 'errorMessage' el resultado de la función "<span class="arrow">getMessage()</span>".
                                    <br>
                                    <br>
                                    Con esta función obtenemos el motivo de la denegación del servidor. Para ver todos los errores de denegación actualizados, puede comprobar nuestra <a target="_blank" href="https://desarrolladores.addonpayments.com/#!/technical-resources/messages">documentación de Addon Payments.</a>
                                </p>

                            </div>
                        </div>
                        <!-- Fin Punto 2 -->
                    
                    </div>
                    <!-- /Contenido común -->

                </div>
            </div>
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
        <script src="../../../../assets/js/barraprogreso.js"></script>
        
    </body>
</html>
