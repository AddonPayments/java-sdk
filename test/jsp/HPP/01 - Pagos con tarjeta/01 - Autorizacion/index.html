<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="author" content="Víctor Cantera">
        <link rel="icon" href="../../../../assets/img/comercia_ico.png" type="image/x-icon"/ >
        <title>Autorización (HPP) - SDK JAVA</title>

        <!-- Bootstrap 4.3.1 -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

        <!-- CSS -->
        <link rel="stylesheet" href="../../../../assets/css/style.css">

        <!-- Script para comprobar los datos de la tarjeta mediante HPP -->
        <script src="../../../../assets/js/rxp-hpp.js"></script> <!-- Available at https://github.com/realexpayments -->
    </head>

    <body>
        <!-- NAVBAR -->
        <nav class="navbar navbar-expand-lg navbar-light navbar-rpdc mb-3">
            <a class="navbar-brand">
                <img src="../../../../assets/img/log2.svg" width="30" height="30" class="img-fluid" alt="Logo Addon Payments">
                <span class="addonNav">ADDON</span> <span>PAYMENTS</span>
                <span class="d-none d-sm-none d-lg-inline d-xl-inline sdkNav">
                    <span>
                        /SDK
                        <span class="barraNav">_</span>
                        de
                        <span class="barraNav">_</span>
                        JAVA
                    </span>
                </span>

            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
          </a>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto pl-2 pr-2">
                    <li class="nav-item dropdown">
                        <a class="nav-link pl-2 dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          Inicio
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item pl-2" href="../../../../index.html">Índice</a>
                            <a class="dropdown-item pl-2" href="../../../errores.html">Errores de Addon Payments</a>
                            <a class="dropdown-item pl-2" href="../../../informe.html">Convertir informe</a>
                        </div>
                    </li>
                    <li class="nav-item ml-1 dropdown">
                        <a class="nav-link pl-2 dropdown-toggle active" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Pagos con tarjeta
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                            <div class="dropdown-header text-center p-0">API</div>
                            <hr class="m-0 p-0">
                                <a class="dropdown-item pl-2" href="../../../API/01%20-%20Pagos%20con%20tarjeta/01%20-%20Autorización/index.html">Autorización</a>
                                <a class="dropdown-item pl-2" href="../../../API/01%20-%20Pagos%20con%20tarjeta/02%20-%20OTB/index.html">OTB</a>
                                <a class="dropdown-item pl-2" href="../../../API/01%20-%20Pagos%20con%20tarjeta/03%20-%20Credit/index.html">Credit</a>
                            <hr class="m-0 p-0">
                            <div class="dropdown-header text-center p-0">HPP</div>
                            <hr class="m-0 p-0">
                                <a class="dropdown-item pl-2 active" href="#">Autorización</a>
                                <a class="dropdown-item pl-2" href="../02%20-%20OTB/index.html">OTB</a>
                                <a class="dropdown-item pl-2" href="../03%20-%20Pay%20By%20Link/index.html">Pay By Link</a>
                        </div>
                    </li>
                    <li class="nav-item ml-1 dropdown">
                        <a class="nav-link pl-2 dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Almacenamiento de tarjeta
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                            <div class="dropdown-header text-center p-0">API</div>
                            <hr class="m-0 p-0">
                                <a class="dropdown-item pl-2" href="../../../API/02%20-%20Almacenamiento%20de%20tarjeta/01%20-%20Crear%20un%20cliente/index.html">Crear un cliente</a>
                                <a class="dropdown-item pl-2" href="../../../API/02%20-%20Almacenamiento%20de%20tarjeta/02%20-%20Almacenar%20una%20tarjeta/index.html">Almacenar una tarjeta</a>
                                <a class="dropdown-item pl-2" href="../../../API/02%20-%20Almacenamiento%20de%20tarjeta/03%20-%20Editar%20tarjeta/index.html">Editar tarjetas</a>
                                <a class="dropdown-item pl-2" href="../../../API/02%20-%20Almacenamiento%20de%20tarjeta/04%20-%20Eliminar%20tarjeta/index.html">Eliminar tarjetas</a>
                                <a class="dropdown-item pl-2" href="../../../API/02%20-%20Almacenamiento%20de%20tarjeta/05%20-%20Auth/index.html">Autorización</a>
                                <a class="dropdown-item pl-2" href="../../../API/02%20-%20Almacenamiento%20de%20tarjeta/06%20-%20Credit/index.html">Credit</a>
                            <hr class="m-0 p-0">
                            <div class="dropdown-header text-center p-0">HPP</div>
                            <hr class="m-0 p-0">
                                <a class="dropdown-item pl-2" href="../../02%20-%20Almacenamiento%20de%20tarjeta/01%20-%20Crear%20un%20cliente/index.html">Crear un cliente</a>
                                <a class="dropdown-item pl-2" href="../../02%20-%20Almacenamiento%20de%20tarjeta/02%20-%20Mostrar%20Tarjetas/index.html">Mostrar tarjetas</a>
                        </div>
                    </li>

                    <li class="nav-item ml-1 dropdown">
                        <a class="nav-link pl-2 dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Gestión de transacciones
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item pl-2" href="../../../API/03%20-%20Gestión%20de%20transacciones/01%20-%20Capturar/index.html">Settle (Capturar)</a>
                            <a class="dropdown-item pl-2" href="../../../API/03%20-%20Gestión%20de%20transacciones/02%20-%20Rebate/index.html">Rebate (Devolución)</a>
                            <a class="dropdown-item pl-2" href="../../../API/03%20-%20Gestión%20de%20transacciones/03%20-%20Void/index.html">Void (Anular transacción)</a>
                        </div>
                    </li>

                    <li class="nav-item ml-1 dropdown">
                        <a class="nav-link pl-2 dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Filtro de fraude
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                            
                            <div class="dropdown-header text-center p-0">API</div>
                            <hr class="m-0 p-0">
                                <a class="dropdown-item pl-2"  href="../../../API/05%20-%20Fraud%20Management/01%20-%20Fraud%20Filter/index.html">Filtro de fraude</a>
                                <a class="dropdown-item pl-2"  href="../../../API/05%20-%20Fraud%20Management/02%20-%20Address%20Verification">Verificación de dirección</a>
                                <a class="dropdown-item pl-2"  href="../../../API/05%20-%20Fraud%20Management/03%20-%20Hold">Retener transacción</a>
                                <a class="dropdown-item pl-2"  href="../../../API/05%20-%20Fraud%20Management/04%20-%20Lanzamiento">Lanzar transacción</a>
                            <hr class="m-0 p-0">
                            <div class="dropdown-header text-center p-0">HPP</div>
                            <hr class="m-0 p-0">
                                <a class="dropdown-item pl-2"  href="../../03%20-%20Fraud%20Management/01%20-%20Fraud%20Filter/index.html">Filtro de fraude</a>
                        </div>
                    </li>

                    <li class="nav-item ml-1 dropdown">
                        <a class="nav-link pl-2 dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            DCC
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                            <div class="dropdown-header text-center p-0">API</div>
                            <hr class="m-0 p-0">
                                <a class="dropdown-item pl-2"  href="../../../API/04%20-%20DCC/01%20-%20Comprobar%20DCC/index.html">Comprobar DCC</a>
                            <hr class="m-0 p-0">
                            <div class="dropdown-header text-center p-0">HPP</div>
                            <hr class="m-0 p-0">
                                <a class="dropdown-item pl-2"href="../../04%20-%20DCC/index.html">Operación con DCC</a>
                        </div>
                    </li>
                </ul>
            </div>
        </nav>
        <!-- /NAVBAR -->

        <div class="col-lg-12"> 
            <div id="contenidoComun" class="container-fluid">
                <div class="row">

                    <!-- Menú lateral -->
                    <div class="col-lg-2 sticky-top d-none d-sm-none d-lg-block d-xl-block MenuLateral">

                        <!-- Barra de progreso -->
                        <div class="progress-bar" id="progreso"></div>
                        <!-- /Barra de progreso -->

                        <nav class="navbar sticky-top navbar-light" style="padding: 0px;">
                            <nav class="nav nav-pills flex-column">
                                <a class="nav-link" href="#autorizacion">1. Autorización</a>
                                <nav>
                                  <a class="nav-link ml-3 my-1" href="#codigoEjemplo">1.1 Código de ejemplo</a>
                                </nav>
                                <a class="nav-link" href="#descripciones">2. Descripciones</a>
                                <nav class="nav nav-pills flex-column">
                                  <a class="nav-link ml-3 my-1" href="#imports">2.1 Imports</a>
                                  <a class="nav-link ml-3 my-1" href="#ConfigTerminal">2.2 Configuración del terminal</a>
                                  <a class="nav-link ml-3 my-1" href="#envioOP">2.3 Envío de la operación archivo JAVA</a>
                                  <a class="nav-link ml-3 my-1" href="#envioOPHTML">2.4 Envío de la operación archivo HTML</a>
                                </nav>
                            </nav>
                        </nav>
                    </div>

                    <div class="col-lg-10" >
                        <div class="contenedor">
                            <div class="pl-3 pt-3 pr-3 pb-4 mb-3 text-justify">
                                <h3 id="autorizacion" class="titulo">
                                    1. Autorización
                                </h3>
                                <hr>

                                <p>
                                    Una vez que esté listo para procesar un pago en su aplicación/sitio web, debe enviar una <b>petición POST</b> con los detalles de la transacción a nuestro servidor. Puede cargar el HPP en un iFrame para integrarlo sin problemas con el recorrido de su cliente. Alternativamente, si elige una redirección completa, puede usar nuestro sistema de plantillas para mantener la apariencia de su aplicación/sitio web. El HPP se procesará de acuerdo con el dispositivo que el cliente esté usando; equipo de escritorio, tableta o móvil.
                                </p>
                                <p>
                                    Una vez completado, devolveremos la respuesta de la transacción a una URL que usted nos debe facilitar en la petición POST.. La respuesta contendrá una cadena en hash (SHA1HASH) compuesta de variables de información sobre la transacción, que incluyen el <b>ID de la orden</b>, el <b>código de resultado</b> y <b>la marca de tiempo (timestamp)</b>. El SDK verificará automáticamente el hash y generará una excepción si hay un problema. Si no está utilizando el SDK, consulte la documentación de <b>Cómo verificar la respuesta de Hash</b> para cada tipo de solicitud.
                                </p>
                                <p>
                                    La marca de tiempo devuelta en la respuesta será idéntica a la enviada en la solicitud POST. Esto, combinado con el ID de pedido y otras variables de transacción, se puede utilizar para vincular definitivamente la respuesta recibida con la solicitud de transacción y el pedido creado en su aplicación. También debe verificar las otras variables de transacción, por ejemplo, el importe contra lo que estaba almacenado en su aplicación en el momento en que se envió la solicitud.</a>
                                </p>

                                <p class="alert alert-danger" role="alert">
                                    Recomendamos encarecidamente sanear los datos del titular de la tarjeta antes de enviarla en la solicitud. Por ejemplo, debe comprobar que el número de tarjeta es válido y que la fecha de caducidad es correcta. <a target="_blank" href="https://github.com/globalpayments/rxp-js">Nuestra biblioteca JS</a> contiene un conjunto de funciones útiles que le ayudan a procesar las solicitudes correctamente.
                                    <small class="form-text text-muted">
                                        --> En los ejemplos de esta documentación usamos el fichero de comprobación JS rxp-hpp.js de RealexPayments.  Podrá ver el fichero en la carpeta de "assets/js".
                                    </small>
                                </p>

                                <h5 style="" class="pt-3" id="codigoEjemplo">1.1 Código de ejemplo</h5>

                                <hr>

                                <div class="p-4 panelCode">
                                    <code>
                                            <span class="comments">// Importamos las clases necesarias para realizar las peticiones</span>
                                        <br>
                                            <span class="purple">import </span><span class="variables">java.math.BigDecimal</span><span class="new">;</span>
                                        <br>
                                        <br>
                                            <span class="purple">import </span><span class="variables">org.junit.Test</span><span class="new">;</span>
                                        <br>
                                        <br>
                                            <span class="purple">import </span><span class="variables">com.global.api.ServicesContainer</span><span class="new">;</span>
                                        <br>
                                            <span class="purple">import </span><span class="variables">com.global.api.entities.Address</span><span class="new">;</span>
                                        <br>
                                            <span class="purple">import </span><span class="variables">com.global.api.entities.HostedPaymentData</span><span class="new">;</span>
                                        <br>
                                            <span class="purple">import </span><span class="variables">com.global.api.entities.enums.AddressType</span><span class="new">;</span>
                                        <br>
                                            <span class="purple">import </span><span class="variables">com.global.api.entities.enums.HppVersion</span><span class="new">;</span>
                                        <br>
                                            <span class="purple">import </span><span class="variables">com.global.api.entities.exceptions.ApiException</span><span class="new">;</span>
                                        <br>
                                            <span class="purple">import </span><span class="variables">com.global.api.serviceConfigs.HostedPaymentConfig</span><span class="new">;</span>
                                        <br>
                                            <span class="purple">import </span><span class="variables">com.global.api.services.HostedService</span><span class="new">;</span>
                                        <br>
                                            <span class="purple">import </span><span class="variables">com.global.api.serviceConfigs.GatewayConfig</span><span class="new">;</span>
                                        <br>
                                        <br>
                                            <span class="comments">// Configuramos el cliente y los ajustes de la petición</span>
                                        <br>
                                            <span class="purple">public class </span><span class="variables">Addon {</span>
                                        <br>
                                        <br>
                                            <span class="pl-3 purple">private </span><span class="variables">HostedPaymentConfig </span><span class="new">hostedPaymentConfig;</span>
                                        <br>
                                        <br>
                                            <span class="pl-3 purple">private </span><span class="variables">HostedPaymentData </span><span class="new">hostedPaymentData;</span>
                                        <br>
                                        <br>
                                            <span class="pl-3 purple">private </span><span class="variables">Address </span><span class="new">billingAddress;</span>
                                        <br>
                                        <br>
                                            <span class="pl-3 purple">private </span><span class="variables">Address </span><span class="new">shippingAddress;</span>
                                        <br>
                                        <br>
                                            <span class="pl-3 purple">private </span><span class="variables">HostedService </span><span class="new">service;</span>
                                        <br>
                                        <br>
                                            <span class="pl-3 purple">public </span><span class="variables">Addon() </span><span class="purple">throws </span><span class="variables">ApiException {</span>
                                        <br>
                                            <span class="pl-5 variables">GatewayConfig </span><span class="orange">config </span><span class="new">= new </span><span class="variables">GatewayConfig();</span>
                                        <br>
                                            <span class="pl-5 orange">config.</span><span class="variables">setMerchantId(</span><span class="new">"addonjavatest"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 orange">config.</span><span class="variables">setAccountId(</span><span class="new">"api"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 orange">config.</span><span class="variables">setSharedSecret(</span><span class="new">"secret"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 orange">config.</span><span class="variables">setServiceUrl(</span><span class="new">"https://hpp.sandbox.addonpayments.com/pay"</span><span class="variables">);</span>
                                        <br>
                                        <br>
                                            <span class="pl-5 comments">// Creamos el objeto de "hostedPaymentConfig"</span>
                                        <br>
                                            <span class="pl-5 new">hostedPaymentConfig </span><span class="variables">= </span><span class="purple">new </span><span class="variables">HostedPaymentConfig();</span>
                                        <br>
                                            <span class="pl-5 new">hostedPaymentConfig</span><span class="variables">.setVersion(HppVersion.</span><span class="new">Version2</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 orange">config</span><span class="variables">.setHostedPaymentConfig(</span><span class="new">hostedPaymentConfig</span><span class="variables">);</span>
                                        <br>
                                        <br>
                                            <span class="pl-5 comments">// Añadimos los campos obligatorios y recomendados por 3D Secure 2</span>
                                        <br>
                                            <span class="pl-5 new">hostedPaymentData </span><span class="variables">= </span><span class="purple">new </span><span class="variables">HostedPaymentData();</span>
                                        <br>
                                            <span class="pl-5 new">hostedPaymentData</span><span class="variables">.setCustomerEmail(</span><span class="new">"soporte@addonpayments.com"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 new">hostedPaymentData</span><span class="variables">.setCustomerPhoneMobile(</span><span class="new">"34|914353028"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 new">hostedPaymentData</span><span class="variables">.setAddressesMatch(</span><span class="purple">false</span><span class="variables">);</span>
                                        <br>
                                        <br>
                                            <span class="pl-5 new">billingAddress </span><span class="variables">= </span><span class="purple">new </span><span class="variables">Address();</span>
                                        <br>
                                            <span class="pl-5 new">billingAddress</span><span class="variables">.setStreetAddress1(</span><span class="new">"Calle 123"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 new">billingAddress</span><span class="variables">.setStreetAddress2(</span><span class="new">"Calle 456"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 new">billingAddress</span><span class="variables">.setStreetAddress3(</span><span class="new">"Calle 789"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 new">billingAddress</span><span class="variables">.setCity(</span><span class="new">"Elche"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 new">billingAddress</span><span class="variables">.setPostalCode(</span><span class="new">"03201"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 new">billingAddress</span><span class="variables">.setCountry(</span><span class="new">"826"</span><span class="variables">);</span>
                                        <br>
                                        <br>
                                            <span class="pl-5 new">shippingAddress  </span><span class="variables">= </span><span class="purple">new </span><span class="variables">Address();</span>
                                        <br>
                                            <span class="pl-5 new">shippingAddress </span><span class="variables">.setStreetAddress1(</span><span class="new">"Calle 123"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 new">shippingAddress </span><span class="variables">.setStreetAddress2(</span><span class="new">"Calle 456"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 new">shippingAddress </span><span class="variables">.setStreetAddress3(</span><span class="new">"Calle 789"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 new">shippingAddress </span><span class="variables">.setCity(</span><span class="new">"Elche"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 new">shippingAddress </span><span class="variables">.setPostalCode(</span><span class="new">"03201"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 new">shippingAddress </span><span class="variables">.setState(</span><span class="new">"ES"</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-5 new">shippingAddress </span><span class="variables">.setCountry(</span><span class="new">"826"</span><span class="variables">);</span>
                                        <br>
                                        <br>
                                            <span class="pl-5 new">service  </span><span class="variables">= </span><span class="purple">new </span><span class="variables">HostedService(</span><span class="orange">config</span><span class="variables">);</span>
                                        <br>
                                            <span class="pl-3 variables">}</span>
                                        <br>
                                        <br>
                                            <span class="pl-3 comments">// Lanzamos la petición al servidor de Addon Payments</span>
                                        <br>
                                            <span class="pl-3 comments">@Test</span>
                                        <br>
                                            <span class="pl-3 purple">public void </span><span class="variables">Authhpp() </span><span class="purple">throws </span><span class="variables">ApiException {</span>
                                        <br>
                                        <br>
                                            <span class="pl-5 purple">try </span><span class="variables">{</span>
                                        <br>
                                            <span class="pl-6 comments">// Procesamos una autorización</span>
                                        <br>
                                            <span class="pl-6 new">hppJson </span><span class="variables">= </span><span class="new">service</span><span class="variables">.charge(</span><span class="purple">new </span><span class="variables">BigDecimal(</span><span class="new">"19.19"</span><span class="variables">))</span>
                                        <br>
                                            <span class="pl-7 variables">.withCurrency(</span><span class="new">"EUR"</span><span class="variables">)</span>
                                        <br>
                                            <span class="pl-7 variables">.withHostedPaymentData(</span><span class="new">hostedPaymentData</span><span class="variables">)</span>
                                        <br>
                                            <span class="pl-7 variables">.withAddress(</span><span class="new">billingAddress</span><span class="variables">, AddressType.</span><span class="new">Billing</span><span class="variables">)</span>
                                        <br>
                                            <span class="pl-7 variables">.withAddress(</span><span class="new">shippingAddress</span><span class="variables">, AddressType.</span><span class="new">Shipping</span><span class="variables">)</span>
                                        <br>
                                            <span class="pl-7 variables">.serialize();</span>
                                        <br>
                                        <br>
                                            <span class="comments pl-6">// Obtenemos la respuesta y la mostramos</span>
                                        <br>
                                            <span class="pl-6 variables">String </span><span class="orange">result </span><span class="variables">= </span><span class="new">"Resultado == " </span><span class="variables">+ </span><span class="orange">response</span><span class="variables">.getResponseCode(); </span><span class="comments">// 00 == Success</span>
                                        <br>
                                        <br>
                                            <span class="pl-5 variables">}</span><span class="purple"> catch</span> <span class="variables">(ApiException exc) {</span>
                                        <br>
                                            <span class="comments pl-7">// Añada aquí su tratamiento de errores</span>
                                        <br>
                                            <span class="pl-7 variables">String <span class="orange">errorMessage </span><span class="variables">= </span><span class="orange">exc</span><span class="variables">.getMessage();</span>
                                        <br>
                                            <span class="pl-5 variables">}</span>
                                        <br>
                                            <span class="pl-4 variables">}</span>
                                        <br>
                                            <span class="variables">}</span>
                                    </code>
                                </div>
                            </div>            
                        </div>

                        <div class="contenedor">
                            <div class="pl-3 pt-3 mb-4 pb-1 pr-3 text-justify">
                                <h3 class="pt-1" id="descripciones">
                                    2. Descripciones
                                </h3>
                                <hr>
                                
                                <h5 id="imports">2.1 Imports</h5>
                                    <p>
                                       Debemos cargar el archivo que enruta las clases del SDK e importar aquellas clases encesarias para realizar una operación:
                                    </p>
                                    <div class="p-4 mb-4 panelCode">
                                        <code>
                                                <span class="comments">// Importamos las clases necesarias para realizar las peticiones</span>
                                            <br>
                                                <span class="purple">import </span><span class="variables">java.math.BigDecimal</span><span class="new">;</span>
                                            <br>
                                            <br>
                                                <span class="purple">import </span><span class="variables">org.junit.Test</span><span class="new">;</span>
                                            <br>
                                            <br>
                                                <span class="purple">import </span><span class="variables">com.global.api.ServicesContainer</span><span class="new">;</span>
                                            <br>
                                                <span class="purple">import </span><span class="variables">com.global.api.entities.Address</span><span class="new">;</span>
                                            <br>
                                                <span class="purple">import </span><span class="variables">com.global.api.entities.HostedPaymentData</span><span class="new">;</span>
                                            <br>
                                                <span class="purple">import </span><span class="variables">com.global.api.entities.enums.AddressType</span><span class="new">;</span>
                                            <br>
                                                <span class="purple">import </span><span class="variables">com.global.api.entities.enums.HppVersion</span><span class="new">;</span>
                                            <br>
                                                <span class="purple">import </span><span class="variables">com.global.api.entities.exceptions.ApiException</span><span class="new">;</span>
                                            <br>
                                                <span class="purple">import </span><span class="variables">com.global.api.serviceConfigs.HostedPaymentConfig</span><span class="new">;</span>
                                            <br>
                                                <span class="purple">import </span><span class="variables">com.global.api.services.HostedService</span><span class="new">;</span>
                                            <br>
                                                <span class="purple">import </span><span class="variables">com.global.api.serviceConfigs.GatewayConfig</span><span class="new">;</span>
                                        </code>
                                    </div>

                                <hr>

                                <h5 id="ConfigTerminal" class="mt-3">2.2 Configuración del terminal</h5>
                                    <p>
                                       Debemos introducir los datos de configuración que se facilitan en la llamada de cualificación del soporte técnico de Addon Payments.
                                    </p>
                                    <ul>
                                       <li>
                                           Merchant_ID = Identificador del comercio.
                                       </li>
                                       <li>
                                           SubAccount = Subcuenta faciltiada en la llamada de cualificación (si se deja en blanco se envía la subcuenta por defecto que le hayan creado).
                                       </li>
                                       <li>
                                           Shared Secret = Contraseña de seguridad del terminal.
                                       </li>
                                    </ul>
                                    <small class="form-text text-muted alert alert-primary">
                                        --&gt; En caso de que le falte algún dato de los mencionados arriba, debe contactar con su soporte técnico de Addon Payments llamando al teléfono 914 353 028 (opción 2) o enviando un email al correo electrónico <a target="_blank" href="mailto:soporteaddonpayments.com">soporteaddonpayments.com</a>.
                                    </small>
                                    <div class="p-4 mb-4 panelCode">
                                        <code>
                                                <span class="variables">GatewayConfig </span><span class="orange">config </span><span class="new">= new </span><span class="variables">GatewayConfig();</span>
                                            <br>
                                                <span class="orange">config.</span><span class="variables">setMerchantId(</span><span class="new">"addonjavatest"</span><span class="variables">);</span>
                                            <br>
                                                <span class="orange">config.</span><span class="variables">setAccountId(</span><span class="new">"api"</span><span class="variables">);</span>
                                            <br>
                                                <span class="orange">config.</span><span class="variables">setSharedSecret(</span><span class="new">"secret"</span><span class="variables">);</span>
                                            <br>
                                                <span class="orange">config.</span><span class="variables">setServiceUrl(</span><span class="new">"https://hpp.sandbox.addonpayments.com/pay"</span><span class="variables">); </span><span class="comments">// Se debe emplear una de las siguientes URL's:</span>
                                            <br>
                                                <span class="comments">// Sandbox URL para el entorno de pruebas - <b>https://hpp.sandbox.addonpayments.com/pay</b>.</span>
                                            <br>
                                                <span class="comments">// Live URL para el entorno de producción - <b>https://hpp.addonpayments.com/pay</b>.</span>
                                            <br>
                                            <br>
                                                <span class="comments">// Creamos el objeto de "hostedPaymentConfig"</span>
                                            <br>
                                                <span class="new">hostedPaymentConfig </span><span class="variables">= </span><span class="purple">new </span><span class="variables">HostedPaymentConfig();</span>
                                            <br>
                                                <span class="new">hostedPaymentConfig</span><span class="variables">.setVersion(HppVersion.</span><span class="new">Version2</span><span class="variables">);</span>
                                            <br>
                                                <span class="orange">config</span><span class="variables">.setHostedPaymentConfig(</span><span class="new">hostedPaymentConfig</span><span class="variables">);</span>
                                            <br>
                                            <br>
                                                <span class="new">service  </span><span class="variables">= </span><span class="purple">new </span><span class="variables">HostedService(</span><span class="orange">config</span><span class="variables">);</span>
                                        </code>
                                    </div>

                                <hr>

                                <h5 id="envioOP" class="mt-3">
                                    2.3 Envío de la operación archivo JAVA
                                </h5>

                                <p>
                                    Para enviar la operación debemos emplear el modelo de excepciones "try - catch". 
                                </p>
                                <ul>
                                    <li>
                                        Llamamos al objeto "$hppJson" e indicamos el importe que queremos cargar: 
                                        <span class="variableBgW">service</span><span class="arrow">.charge(</span><span class="variableBgW">new </span><span class="arrow">Bigdecimal("</span><span class="variableBgW">19.19</span><span class="arrow">"))</span>
                                    </li>

                                    <br>

                                    <li>
                                        Posteriormente debemos indicar la moneda en la que vamos a realizar el cargo:
                                        <span class="arrow">.withCurrency(</span><span class="comentariosBgW">"EUR"</span><span class="arrow">)</span>
                                    </li>

                                    <br>

                                    <li>
                                        Indicamos la configuración de la pasarela de pagos:
                                        <span class="arrow">.withHostedPaymentData(</span><span class="comentariosBgW">hostedPaymentData</span><span class="arrow">)</span>
                                    </li>

                                    <br>

                                    <li>
                                        Asociamos la dirección de facturación:
                                        <span class="arrow">.withAddress(</span><span class="comentariosBgW">billingAddress, AddressType.Billing</span><span class="arrow">)</span>
                                    </li>

                                    <br>

                                    <li>
                                        Asociamos la dirección de envío:
                                        <span class="arrow">.withAddress(</span><span class="comentariosBgW">shippingAddress, AddressType.Shipping</span><span class="arrow">)</span>
                                    </li>
                                    
                                    <br>

                                    <li>
                                        Por último, enviamos la petición:
                                        <span class="arrow">.serialize();</span>
                                    </li>
                                </ul>
                                <div class="p-4 mb-4 panelCode">
                                    <code>
                                            <span class="comments">// Lanzamos la petición al servidor de Addon Payments</span>
                                        <br>
                                            <span class="comments">@Test</span>
                                        <br>
                                            <span class="purple">public void </span><span class="variables">Authhpp() </span><span class="purple">throws </span><span class="variables">ApiException {</span>
                                        <br>
                                        <br>
                                            <span class="pl-3 purple">try </span><span class="variables">{</span>
                                        <br>
                                            <span class="pl-5 comments">// Procesamos una autorización</span>
                                        <br>
                                            <span class="pl-5 new">hppJson </span><span class="variables">= </span><span class="new">service</span><span class="variables">.charge(</span><span class="purple">new </span><span class="variables">BigDecimal(</span><span class="new">"19.19"</span><span class="variables">))</span>
                                        <br>
                                            <span class="pl-7 variables">.withCurrency(</span><span class="new">"EUR"</span><span class="variables">)</span>
                                        <br>
                                            <span class="pl-7 variables">.withHostedPaymentData(</span><span class="new">hostedPaymentData</span><span class="variables">)</span>
                                        <br>
                                            <span class="pl-7 variables">.withAddress(</span><span class="new">billingAddress</span><span class="variables">, AddressType.</span><span class="new">Billing</span><span class="variables">)</span>
                                        <br>
                                            <span class="pl-7 variables">.withAddress(</span><span class="new">shippingAddress</span><span class="variables">, AddressType.</span><span class="new">Shipping</span><span class="variables">)</span>
                                        <br>
                                            <span class="pl-7 variables">.serialize();</span>
                                        <br>
                                        <br>
                                            <span class="comments pl-5">// Obtenemos la respuesta y la mostramos</span>
                                        <br>
                                            <span class="pl-5 variables">String </span><span class="orange">result </span><span class="variables">= </span><span class="new">"Resultado == " </span><span class="variables">+ </span><span class="orange">response</span><span class="variables">.getResponseCode(); </span><span class="comments">// 00 == Success</span>
                                        <br>
                                        <br>
                                            <span class="pl-3 variables">}</span><span class="purple"> catch</span> <span class="variables">(ApiException exc) {</span>
                                        <br>
                                            <span class="comments pl-5">// Añada aquí su tratamiento de errores</span>
                                        <br>
                                            <span class="pl-5 variables">String <span class="orange">errorMessage </span><span class="variables">= </span><span class="orange">exc</span><span class="variables">.getMessage();</span>
                                        <br>
                                            <span class="pl-3 variables">}</span>
                                        <br>
                                            <span class="variables">}</span>
                                    </code>
                                </div>
                                <p class="pb-4">
                                    Para la respuesta obtenemos en la variable 'errorMessage' el resultado de la función "<span class="arrow">getMessage()</span>".
                                    <br>
                                    <br>
                                    Con esta función obtenemos el motivo de la denegación del servidor. Para ver todos los errores de denegación actualizados, puede comprobar nuestra <a target="_blank" href="https://desarrolladores.addonpayments.com/#!/technical-resources/messages">documentación de Addon Payments.</a>
                                </p>

                                <hr>

                                <h5 id="envioOPHTML" class="mt-3">
                                    2.4 Envío de la operación archivo HTML
                                </h5>

                                <p>
                                    Para lanzar la operación desde nuestro HTML, debemos emplear lo siguientes parámetros: 
                                </p>
                                <ul>
                                    <li>
                                        Indicamos la ruta del archivo html que realiza la petición al servidor de html: 
                                        <span class="arrow">$.getJSON(</span><span class="comentariosBgW">"request.html"</span><span class="arrow">)</span>
                                    </li>

                                    <br>

                                    <li>
                                        Posteriormente debemos indicar la URL del servidor de Addon Payments:
                                        <span class="arrow">setHppUrl(</span><span class="comentariosBgW">"https://hpp.sandbox.addonpayments.com/pay"</span><span class="arrow">);</span>
                                    </li>
                                    
                                    <br>

                                    <li>
                                        Por último, debemos indicar el identificador del botón y la ruta del archivo de respuesta:
                                        <span class="arrow">redirect.init(</span><span class="comentariosBgW">"payButtonId"</span><span class="arrow">,</span> <span class="comentariosBgW">"response.html"</span><span class="arrow">);</span>
                                    </li>
                                </ul>
                                <div class="p-4 mb-4 panelCode">
                                    <code>
                                            <span class="pl-2 new"><</span><span class="script">script</span><span class="new">></span>
                                        <br>
                                            <span class="pl-4">$</span><span class="require">(</span><span class="service">document</span><span class="require">).</span><span class="new">ready(</span><span class="function">function</span><span class="new">() {</span>
                                        <br>
                                            <span class="pl-5">$.</span><span class="new">getJSON(</span><span class="require">"</span><span class="green">request.html</span><span class="require">"</span><span class="new">,</span> <span class="function">function</span><span class="require">(</span><span class="orange">jsonFromRequestEndpoint</span><span class="require">) {</span>
                                        <br>
                                            <span class="pl-5 service">RealexHpp</span><span class="new">.setHppUrl(</span><span class="require">"</span><span class="green">https://hpp.sandbox.addonpayments.com/pay</span><span class="require">"</span><span class="new">);</span>
                                        <br>
                                            <span class="pl-5 service">RealexHpp</span><span class="new">.redirect.init(</span><span class="require">"</span><span class="green">payButtonId</span><span class="require">"</span><span class="new">,</span> <span class="require">"</span><span class="green">response.html</span><span class="require">"</span><span class="new">,</span> <span class="variables">jsonFromRequestEndpoint</span><span class="new">);</span>
                                        <br>
                                            <span class="pl-5 new">});</span>
                                        <br>
                                            <span class="pl-4 new">});</span>
                                        <br>
                                            <span class="pl-2 new"><</span><span class="script">/script</span><span class="new">></span>
                                    </code>
                                </div>
                            </div>            
                        </div>
                    
                    </div>
                    <!-- /Contenido común -->

                </div>
            </div>
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
        <script src="../../../../assets/js/barraprogreso.js"></script>

    </body>
</html>